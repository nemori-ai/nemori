# LoCoMo 结果分析器使用指南

## 快速启动

1. **打开终端并进入项目目录：**
   ```bash
   cd /Users/nanjiayan/Desktop/nemori_oos/Nemori-code/web-react
   ```

2. **运行启动脚本：**
   ```bash
   ./start.sh
   ```
   
   或者手动启动：
   ```bash
   npm install  # 首次运行需要安装依赖
   npm start    # 启动开发服务器
   ```

3. **在浏览器中访问：**
   http://localhost:3000

## 使用流程

### 第一步：上传数据文件

在首页，你需要上传两个必需文件：

1. **Results文件** (`results.json`)
   - 位置：`evaluation/locomo/results.json` 或 `results_new_6974.json`
   - 包含：问题、答案、检索到的记忆、时间统计等

2. **Metrics文件** (`metrics.json`) 
   - 位置：`evaluation/locomo/metrics.json`
   - 包含：各项评分指标（BLEU、F1、LLM Judge分数）

3. **数据集文件**（可选）
   - 位置：`web-react/public/locomo10.json`（已自动复制）
   - 包含：原始题目和证据，用于分析检索覆盖率

### 第二步：查看整体统计

上传完成后，会自动显示：

- **整体准确率** - LLM Judge的总体表现
- **平均F1/BLEU分数** - 语义重叠和文本相似度
- **检索性能** - 平均记忆检索时间
- **类别分析** - 各类别题目的准确率对比
- **分数分布** - F1分数的分布情况

### 第三步：探索具体题目

在题目列表中，可以：

1. **搜索筛选**
   - 按关键词搜索问题/答案/回复
   - 按类别筛选（1-4类）
   - 按正确性筛选（正确/错误）
   - 按指标排序（准确性/F1/BLEU/检索时间）

2. **查看题目详情**
   - 点击题目右侧的展开按钮
   - 查看检索到的所有记忆（情景记忆+语义记忆）
   - 查看原始对话内容（如果有）
   - 分析证据覆盖情况

### 第四步：分析检索质量

对于每道题，可以分析：

#### 记忆质量
- **情景记忆**：完整的对话片段，包含时间和上下文
- **语义记忆**：提取的知识点，包含置信度和相关情景
- **检索分数**：向量相似度分数
- **搜索方法**：使用的检索算法（vector/bm25/hybrid/vector_norlift）

#### 证据覆盖
- **成功检索的证据**：应该找到且确实找到的信息
- **遗漏的证据**：应该找到但没有检索到的关键信息  
- **覆盖率统计**：证据覆盖的百分比
- **改进建议**：针对遗漏证据的优化建议

## 关键功能说明

### 📊 统计仪表板
- 卡片式整体指标展示
- 柱状图显示各类别表现
- 饼图显示F1分数分布
- 详细类别统计表格

### 🔍 题目探索器
- 实时搜索和多维度筛选
- 分页浏览大量数据
- 展开/收起详细信息
- 响应式布局适配移动端

### 🧠 记忆查看器
- 分别展示情景记忆和语义记忆
- 显示检索分数和搜索方法
- 支持查看原始对话内容
- 高亮显示时间戳和元数据

### 🎯 证据对比分析
- 智能匹配检索内容与应有证据
- 高亮显示匹配的关键信息
- 标识遗漏的重要证据
- 提供具体的改进建议

## 测试你的NOR-LIFT算法

1. **准备对比数据**
   - 使用原vector方法生成一份results.json
   - 使用vector_norlift方法生成另一份results.json
   - 两份都用同样的metrics.json

2. **对比分析**
   - 分别上传两份数据到分析器
   - 对比整体准确率变化
   - 查看各类别的性能差异
   - 分析检索时间的变化
   - 重点关注证据覆盖率的改进

3. **深入分析**
   - 查看错误→正确的题目：NOR-LIFT成功改进的案例
   - 查看正确→错误的题目：可能需要参数调优
   - 分析记忆检索的质量变化
   - 评估algorithm复杂度vs性能提升的权衡

这个工具能帮你快速发现NOR-LIFT算法在哪些类型的问题上效果更好，以及哪些地方还需要优化。
